<div class="pagefind-search-wrapper">
  <div class="pagefind-search-input" id="search"></div>
  <script>
    window.addEventListener("DOMContentLoaded", (event) => {
      // @ts-ignore
      new PagefindUI({
        element: "#search",
        showSubResults: false,
        showImages: false,
        pageSize: 5,
        processTerm: (term) => {
          console.log("term", term);
          return term;
        },
        processResult: (result) => {
          console.log("result", JSON.stringify(result, null, 4));
          return result.sub_results.excerpt;
        },
      });

      document.addEventListener("keydown", function (event) {
        if (event.key == "Escape") {
          const btn = document.querySelector(
            "button.pagefind-ui__search-clear"
          );
          // @ts-ignore
          if (btn) btn.click();
        }
      });

      window.addEventListener("keydown", (event) => {
        if (event.key === "/" || event.key === ".") {
          event.preventDefault();
          // @ts-ignore
          document.querySelector("div#search input").focus();
        }
      });
    });
  </script>
</div>
