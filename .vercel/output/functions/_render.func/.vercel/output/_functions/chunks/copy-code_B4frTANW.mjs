const id = "copy-code.mdx";
						const collection = "posts";
						const slug = "copy-code";
						const body = "\r\nThis JavaScript was intended specifically for use with ASTRO, but with minimal effort the code could probably be modified to work with any Markdown-generated HTML.\r\n\r\n### Copy Asto-displayed fenced code to the clipboard\r\n\r\nThe JavaScript below adds a link in the code block to copy it to the clipboard, as shown below:\r\n\r\n![collateral/copy-astro-code-to-clipboard.png](https://rogerpence.dev/collateral/copy-astro-code-to-clipboard.png)\r\n\r\nAdd the JavaScript below to your Astro project's client-side JavaScript.\r\n\r\n```js\r\nconst copyToClipboard = (str) => {\r\n  if (navigator && navigator.clipboard && navigator.clipboard.writeText)\r\n    return navigator.clipboard.writeText(str);\r\n  return Promise.reject(\"The Clipboard API is not available.\");\r\n};\r\n\r\nconst preTags = document.querySelectorAll(\"pre\");\r\nlet counter = 1;\r\npreTags.forEach((tag) => {\r\n  const codeId = `id-${counter++}`;\r\n  tag.setAttribute(\"data-code-id\", codeId);\r\n  const insertCodeButton = `\r\n    <small class=\"copy-code-label\">    \r\n        <a data-code-id=\"${codeId}\"\r\n           title=\"Ctrl/Click to copy with line numbers\" \r\n           class=\"copy-code-button\" href=#>\r\n           <i class=\"copy-icon fa-light fa-copy\"></i> <span class=\"copy-text\">copy</span>\r\n        </a>\r\n    </small>`;\r\n  tag.insertAdjacentHTML(\"beforebegin\", insertCodeButton);\r\n});\r\n\r\nconst copyButtons = document.querySelectorAll(\".copy-code-button\");\r\ncopyButtons.forEach((button) => {\r\n  button.addEventListener(\"click\", (e) => {\r\n    e.preventDefault();\r\n\r\n    const codeId = e.currentTarget.getAttribute(\"data-code-id\");\r\n    const preTag = document.querySelector(`pre[data-code-id=\"${codeId}\"]`);\r\n    const codeTag = preTag.firstChild;\r\n\r\n    const faIconEl = button.querySelector(\".copy-icon\");\r\n    const textEl = e.currentTarget.querySelector('span[class=\"copy-text\"]');\r\n\r\n    textEl.innerText = \"copied\";\r\n    faIconEl.classList.remove(\"fa-light\", \"fa-copy\");\r\n    faIconEl.classList.add(\"fa-solid\", \"fa-thumbs-up\");\r\n    faIconEl.classList.add(\"fade-in\");\r\n\r\n    let source;\r\n    if (preTag.hasAttribute(\"data-source\"))\r\n      source = preTag.getAttribute(\"data-source\");\r\n    else source = codeTag.innerText;\r\n\r\n    copyToClipboard(source);\r\n\r\n    setTimeout(() => {\r\n      textEl.innerText = \"copy\";\r\n      faIconEl.classList.remove(\"fa-solid\", \"fa-thumbs-up\");\r\n      faIconEl.classList.add(\"fa-light\", \"fa-copy\");\r\n    }, 1000);\r\n  });\r\n});\r\n```\r\n\r\nAdd these three CSS selectors to your Astro project's global CSS:\r\n\r\n```css\r\n.copy-code-label {\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  margin-bottom: 5px;\r\n  position: relative;\r\n}\r\n.copy-code-label a {\r\n  color: gray;\r\n  position: absolute;\r\n  top: 16px;\r\n  right: 10px;\r\n  text-decoration: none;\r\n}\r\n\r\n.copy-code-label a:after {\r\n  content: \"\";\r\n  height: 1px;\r\n  background: gray;\r\n  display: block;\r\n}\r\n```\r\n\r\n> This JavaScript uses FontAwesome icons.\r\n\r\n#### Show line numbers in Asto-displayed fenced code\r\n\r\nUse the JavaScript to add line numbers to fenced code blocks in Astro. To assign line numbers to a fenced code block, add a `<div class=\"number-code below\"></div> just above the markdown fence, leaving one blank line between the `div` tag and the fence (as shown below).\r\n\r\n````markdown\r\n<div class=\"number-code below\"></div\r\n\r\n```\r\n    ... code to display here\r\n```\r\n````\r\n\r\nAdd the Javascript `addLineNumbers` function to the Astro app's client-side JavaScript.\r\n\r\n```js\r\nconst addLineNumbers = () => {\r\n  const snippetInstances = document.querySelectorAll(\r\n    \"div.number-code-below + small +  pre > code\"\r\n  );\r\n\r\n  snippetInstances.forEach((snippetInstance) => {\r\n    //console.log(snippetInstance.parentElement.innerText)\r\n    snippetInstance.parentElement.setAttribute(\r\n      \"data-source\",\r\n      snippetInstance.parentElement.innerText\r\n    );\r\n\r\n    const lines = snippetInstance.querySelectorAll(\"span.line\");\r\n\r\n    let leadingSpacesCount = 2;\r\n    if (lines.length > 99) leadingSpacesCount = 3;\r\n    if (lines.length < 10) leadingSpacesCount = 1;\r\n\r\n    let counter = 1;\r\n    lines.forEach((line) => {\r\n      const lineNo = counter.toString().padStart(leadingSpacesCount, \" \");\r\n      line.insertAdjacentHTML(\r\n        \"afterbegin\",\r\n        `<span style=\"color: lightskyblue; border-right: 1px lightskyblue solid;padding-right: .2rem;margin-right: .5rem; \">${lineNo}</span>`\r\n      );\r\n      counter++;\r\n    });\r\n  });\r\n};\r\n```\r\n\r\nCall the addLineNumbers() function after the page loads.\r\n\r\n```js\r\naddLineNumbers();\r\n```\r\n";
						const data = {title:"Copy code in Astro to clipboard",description:"How to copy code in Astro to clipboard and, optionally, add line numbers.",tags:["astro","javascript"],date_published:new Date(1681689600000),date_added:new Date(1681689600000),date_updated:new Date(1681689600000),pinned:false};
						const _internal = {
							type: 'content',
							filePath: "C:/Users/thumb/Documents/Projects/astro-4/blog-again/src/content/posts/copy-code.mdx",
							rawData: undefined,
						};

export { _internal, body, collection, data, id, slug };
